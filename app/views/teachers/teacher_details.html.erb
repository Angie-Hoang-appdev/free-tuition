<h1><%= @teacher.name %></h1>

<dl>

  <img width="200" src="<%= @teacher.image %>">
  <dt>Email: <%= @teacher.email %></dt>

  <dt>Expertise: <%= @teacher.expertise %>  </dt>

  <dt>Bio: <%= @teacher.bio %> </dt>
  <dt>Schedule: <%= @teacher.schedule %> </dt>

  <dt>Average Rating: <%= @teacher.average_rating %> <dt>
  
  <%if @current_teacher != nil && @teacher.id == @current_teacher.id %>
  <dt> <a href="/edit_teacher">
        Edit Teacher Details
        </a> 
  <dt>
  <%end%>
</dl>

<% if @current_student != nil %>
<div class="row mb-3">
  <div class="col-md-8 offset-md-2">
    <h2>
      Add a new lesson with <%= @teacher.name %>
    </h2>
    
    <form action="/insert_lesson" method="post">

      <div class="form-group">
        <label for="teacher_id_box">
          Teacher
        </label>
        <select id="teacher_id_box" name="teacher_id_from_query">
            <option value="<%=@teacher.id%>"><%=@teacher.name %></option>
        </select>
      </div>

      <div class="form-group">
        <label for="feedback_box">
          Feedback
        </label>

        <input type="text" id="feedback_box" name="feedback_from_query" class="form-control">
      </div>

      <div class="form-group">
        <label for="rating_box">
          Rating
        </label>
          <select id="rating_box" name="rating_from_query">              
              <option value="1"><%=1 %></option>
              <option value="2"><%=2 %></option>
              <option value="3"><%=3 %></option>
              <option value="4"><%=4 %></option>
              <option value="5"><%=5 %></option>
          </select>
      </div>

      <button class="btn btn-block btn-outline-secondary">
        Create lesson
      </button>
    </form>
  </div>
</div>
<% end %>

<hr>
<h2> <%= @teacher.name %>'s Lessons </h2>
<div class="row mb-3">
  <div class="col-md-12">
    <table class="table" border="1">
   
      <tr>
        <th>
          Lesson Number
        </th>

        <th>
          Teacher
        </th>

        <th>
          Student
        </th>

        <th>
          Student Feedback
        </th>

        <th>
          Teacher's Response
        </th>

        <th>
          Rating
        </th>

        <th>
          Created at
        </th>

        <th>
          Updated at
        </th>

        <th>
        </th>
      </tr>

      <% @lessons_of_teacher.each do |lesson| %>
      <tr>
        <td>
          <%= lesson.id %>
        </td>

        <td>
          <a href="/teachers/<%= lesson.teacher_id %>">
          <%= lesson.teacher %>
        </td>

        <td>
        <a href="/students/<%= lesson.student_id %>">
        <%= lesson.student %>
        </td>

        <td>
          <%= lesson.feedback %>
        </td>
        
        <td>
          <%if lesson.teacher_response != nil%>
          <%= lesson.teacher_response %>
          <%else%>
          No response from teacher yet.
          <%end%>
        </td>

        <td>
          <%= lesson.rating %>
        </td>

        <td>
          <%= time_ago_in_words(lesson.created_at) %> ago
        </td>
        <td>
          <%= time_ago_in_words(lesson.updated_at) %> ago
        </td>

        <td>
          <a href="/lessons/<%= lesson.id %>">
            Edit Teacher Response
          </a>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>

<hr>